
## Rubyで綾波Quine
### 秒速@284km
##### 渋谷.rb[:20171115]

![goku.jpg](../goku.jpg)

---

## 秒速@284km
![goku.jpg](../goku.jpg)

- feedforce エンジニア
- Rails Developers Meetup

---

## 実用性なし
## ネタです

---

## Quine

とにかくやってみたかった
(こういうものです。デモします)

---

### ご覧ください

![ayanami.png](../ayanami.png)

---

#### AA (こういう感じなのだが、崩れている...)

```
　　　　　　　　 　 　 　 ,.､-:::ir､、
　　　　　　　　　　　／:::::::::::::::::..＼
　　　　　　　　　 ／:.:::::､::::::::::';:::::.. i
　　　 　 　 　 　 | i::::,::ト_＼:､:::';:::l: l
　　　　　　　　　｀'!､!ﾄ|!:ャ|`':|:::j:/!〈_,.._
　　　　　　　　　　　　!|;!､.!:l::|:/、,､:'´　'､
　　　　　　　　　　　　　`ヾ!''" /l,､-―::､'､
　　　　　　　　　　　　　　　　f.r--‐､ヽ::::::`、
　　　　　　　　　　　　　　　 /.l゛,:　　ヽヽ::::::'、
　　　　　　　　　　 　 　 　 /.r'´　　　 〉 l::::::l
　　　　　　　　　　　　　　/／　　　　 / 　!::::l
　　　　　　　　　　　　　 ,.'､　　　 　 '|　,.: _|;::〉
　　　　　　 　 　 　 　 ／　 >-､..,__ ﾉ‐'"´_;::':〉
　　　　　　　　　　 ,､' 　 ／'　　　 〈 :::::::::::::: ',
　　　　　 　 　 　 /　　/／　　　 /.!::::::::::::::::: ',
　　　　　 　 　 ／　／'´　　　　/::::::::::::::::::::::::::',
　　　　　　_,.r '　,∠l,_　　　　 /::::/::::::::::::::::::::::::l
　　　　　 〈:i!　　,k';m」 　 　 /::::/:::::::::::::::::::::::::::!
　　　　 　 ｀i`i"|`i'"´　　　 /::::/:::::::::::::::::::::::::::/
　　 ,.､-=＝l＝!=|i:.､　　　/:::::/::::::::::::::::::::::::::/
　　| `'＝===＝77"|　　/::::::/::::::::::::::::::::::::::(
　　 !　　　　　　　　!　 /:::::〃::::::::::::::::::::;;:‐〈　　　　　,､-ri
　　 |　　２－A　　 |　/:::::〃::::::::::::;;:-‐'':::::::::〉==＝'゛;ヾ´ヾ､
　 　 !　 　 　 　 　 l　ヽ::::||::::::‐''"::::::::::::::::;イ;;;;;;;;;;;;;;;;;;;;;;;l　l|
　　　|､..,,, __　__ ,,...|　<ヽ::||::::::::::::::;--― ゛ ,!;､-‐ '''"フ;ド　 !
　　　`''' ‐ -- ‐ '''"　　`ヽ!､__,,∠_,､ -‐''"´　　　　(;r';､',,_,〃
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　￣
```

---

### 見えづらいので画像で

![ayanamiaa.png](../ayanamiaa.png)

---

ayanami_quine.rb

```
eval$s=%w'b="BAhsKwGGAAAA/B8AAAAAAAAAwP//DwAAAAAAAPjvf/4CAAAAAADoe3e+AAAAAAAArE/+ywAAAAAAAADrPwQAAAAAAAAAOA0DAAAAAAAAAACHfwAAAAAAAACAI/wPAAAAAAAAwAXsHwAAAAAAAHAA8QMAAAAAAAAQAMR0AAAAAAAAxobFBgAAAAAAQDDA/n8AAAAAABAO+P9/AAAAAABmAP7//w8AAADAQAD8////AQAA+CAB/v///wcAAHBXgP////8BAED/H/D///8/AAAQ/4f/////AwAAIABA/P//Pw8AByBMkP//Z/z/bQNAAED+//z/NwAAQAOA5///u8lwIwBoIThIM0AJBgAAAAAAAAAADA==";n=Marshal.load(b.unpack("m")[0]);e="eval$s=%w"<<39<<($s*3);o="";j=-1;0.upto(27*80-1){|i|o<<((n[i]==1)?e[j+=1]:32);o<<((i%80==79)?10:"")};o[-10,6]=""<<39<<".join";puts(o)#'.join
```

---

ちょっと AA が残念な感じだけど...

```ruby
$ ruby ayanami_quine.rb
                          eval$s=%w'b
                      ="BAhsKwGGAAAA/B8AAAAA
                   AAAAwP//D wAAAAAAAPj  vf/4CAA A
                   A AADoe 3e+A AAA AAA  ArE/+ y
                  wA A AAAAA  A  DrPwQAAAA A  AA
                        AA O A0DAAAAAA    A
                           AAA  C Hf    wA
                                AAA    AAAACAI/
                               wPA   A    AAAAAAwAXs
                              HwA A       AA AAAHAA8Q
                            MAA         A   AAAAAQ
                            A             M   R0  A AAA
                         AA   AA xo    bF B   gA AA
                      A     AA        QD DA/n8AAAAAABAO
                    +    P9/       AAAAAABmAP7//w8AAADA
                 QA  D8          ////AQAA+CAB/v///wcAAHBXgP/
              //      /           8BAED/H/D///8/AAAQ/4f/////AwAAI
           ABA/P     /  /        Pw8AByBMkP//Z/z/bQNAAED+//z/NwAAQA
            OA5 /// u 8        lwIwBoIThIM0AJBgAAAAAAAAAADA==";n=
      M arshal.load(b       .unpack("m")[0]);e="eval$s=%w"<<39
    <   <($s*3);o="    ";j=-1;0.upto(27*80-1){|i|o<<((n[i]
     =                =   1)?e[j+=1]:32);o<<((i%80==79  )?10            :""
     )    };  o     [  -10,6]=""<<39<<".joi  n"   ;puts(o)#b="BAh sK wG GA
      A               A  A/B8AAAAAAAAAwP  //DwAAAAAAAPjvf/4 CA
      A AA             AADo  e3e+AAAAAAAArE/+ywAAA AAA AA  D  rP    wQA AA   A
           A AA A    A     OA0     D  A AA  AA        A A  A     AA
                                                          CH           '.join
```

---

あとは解説をします。

```
00000000000000000000000000111111111110000000000000000000000000000000000000000000
00000000000000000000001111111111111111111111000000000000000000000000000000000000
00000000000000000001111111110111111111100111111101000000000000000000000000000000
00000000000000000001011111011110111､11100111110100000000000000000000000000000000
00000000000000000011010111110010011111111101001100000000000000000000000000000000
00000000000000000000000011010111111111000010000000000000000000000000000000000000
00000000000000000000000000011100101100001100000000000000000000000000000000000000
00000000000000000000000000000000111000011111111000000000000000000000000000000000
00000000000000000000000000000001110001000011111111110000000000000000000000000000
0000000000000000000000000000001110´000000011011111111000000000000000000000000000
00000000000000000000000000001110000000001000111111000000000000000000000000000000
00000000000000000000000000001000000000000010001100101110000000000000000000000000
00000000000000000000000001100011011000011010001101100000000000000000000000000000
00000000000000000000001000001100000000110111111111111110000000000000000000000000
00000000000000000000100001110000000111111111111111111110000000000000000000000000
00000000000000000110011000000000011111111111111111111111111100000000000000000000
00000000000000110000001000000000001111111111111111111111111111111000000000000000
00000000000111110000010010000000011111111111111111111111111111111110000000000000
00000000000011101110101000000001111111111111111111111111111111111000000000000000
00000010111111111111100000001111111111111111111111111111111111000000000000000000
00001000111111177110000111111111111111111111111111111111110000000000000000000000
00000100000000000000001000111111111111111111111111111100111100000000000011100000
00000100001100100000100111111111111111111110011000111111111111111011011011000000
00000010000000000000001001111111111111110011111111111111111011000000000000000000
00000010110000000000000111100111111111111111111111011101100100110000111011000100
00000000000101101000010000011100000100101100110000000010100､00000110000000000000
00000000000000000000000000000000000000000000000000000000001100000000000000000000
```

---

こんな感じなのです

```
bits = aa.gsub("\n", "").reverse.to_i(2)
b = [Marshal.dump(bits)].pack("m").gsub("\n", "")
```

```
b="BAhsKwGGAAAA/B8AAAAAAAAAwP//DwAAAAAAAPjvf/4CAAAAAADoe3e+AAAAAAAArE/+ywAAAAAAAADrPwQAAAAAAAAAOA0DAAAAAAAAAACHfwAAAAAAAACAI/wPAAAAAAAAwAXsHwAAAAAAAHAA8QMAAAAAAAAQAMR0AAAAAAAAxobFBgAAAAAAQDDA/n8AAAAAABAO+P9/AAAAAABmAP7//w8AAADAQAD8////AQAA+CAB/v///wcAAHBXgP////8BAED/H/D///8/AAAQ/4f/////AwAAIABA/P//Pw8AByBMkP//Z/z/bQNAAED+//z/NwAAQAOA5///u8lwIwBoIThIM0AJBgAAAAAAAAAADA==";
n=Marshal.load(b.unpack("m")[0]);
e="eval$s=%w"<<39<<($s*3);
o="";
j=-1;
0.upto(27*80-1){|i|o<<((n[i]==1)?e[j+=1]:32);
o<<((i%80==79)?10:"")};
o[-10,6]=""<<39<<".join";
puts(o)#

#=> eval$s=%w''.join
```

---

## おしまい

* [284km/ayanami_quine](https://github.com/284km/ayanami_quine)

